var FS=require("fire-fs"),path=require("path");const{remote:remote}=require("electron");let self=module.exports={cfgData:{saveName:null,saveImport:null,bitMapCfg:[],cfgHistory:{}},setSaveName(t){this.cfgData.saveName=t,this.saveConfig()},setSaveImport(t){this.cfgData.saveImport=t,this.saveConfig()},setSavePath(t){this.saveConfig()},setBitmapCfg(t){this.cfgData.bitMapCfg=t},saveConfig(){let t=self._getAppCfgPath();FS.writeFile(t,JSON.stringify(this.cfgData),function(t){}.bind(this))},cleanConfig(){FS.unlink(this._getAppCfgPath())},_getAppCfgPath(){let t=remote.app.getPath("userData"),e=Editor.libraryPath;return e=(e=(e=e.replace(/\\/g,"-")).replace(/:/g,"-")).replace(/\//g,"-"),path.join(t,"bitmap-font-cfg-"+e+".json")},initCfg(t){let e=this._getAppCfgPath();FS.existsSync(e)?FS.readFile(e,"utf-8",function(e,a){if(!e){let e=JSON.parse(a.toString());self.cfgData=e,t&&t(e)}}.bind(self)):t&&t(null)}};